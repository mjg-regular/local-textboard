<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Textboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="{{ url_for('static', filename='scripts.js') }}" defer></script>
</head>
<body>
    <div class="content">
        <div class="threads-container">


            <center><img src="{{ url_for('static', filename='images/' + settings.banner) }}"></center>
            <h1>{{ settings.title }}</h1>
            <center><small>{{ settings.subtitle }}</small></center><br>
            <div class="form-container">
                <form action="/create-thread" method="post">
                    <input type="text" name="title" placeholder="Thread Title">
                    <textarea name="content" placeholder="Enter opening post"></textarea>
                    <input type="submit" value="Create Thread">
                </form>
                
            </div>
            
    <div class="threads-container">
        {% for thread in threads %}
            <div class="thread">
                {% for post in thread.posts %}
                    <div class="{{ 'opening-post' if loop.first else 'post' }}" id="post-{{ post.number }}">
                        {% if loop.first %}
                            <strong class="thread-title">{{ thread.title }}</strong> <!-- Thread title for OP -->
                        {% endif %}
                        <strong>{{ post.name }}</strong> {{ post.date }} No.{{ post.number }}
                        <button class="delete-btn" data-thread-id="{{ loop.index0 }}" data-post-number="{{ post.number }}">x</button><br>
                        <div class="post-content">
                            {% for line in post.content.split('\n') %}
                                {% if line.startswith('>') %}
                                    <span class="quote">{{ line }}</span><br>
                                {% else %}
                                    {{ line }}<br>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
                <form action="/post/{{ loop.index0 }}" method="post" class="reply-form">
                    <textarea name="content" placeholder="Enter your reply"></textarea>
                    <input type="submit" value="Post">
                </form>
            </div>
        {% endfor %}
    </div>

</div>
<div class="sidebar">
    <div class="sidebar-content">
        <small>current board: {{ settings.title }}</small><br><br>
        <button id="settings-btn" class="tomorrow-style-btn">Board Settings</button>
        <!-- Adding the 'Switch' and 'Create Board' buttons -->
        <button id="switch-btn" class="tomorrow-style-btn">Switch</button>
        <form action="/create-board" method="post" class="inline-form">
            <button type="submit" id="create-board-btn" class="tomorrow-style-btn">Create Board</button>
        </form>
            <div id="settings-form" style="display: none;">
                <form action="/update-settings" method="post">
                    <small>Board Name:</small>
                    <input type="text" name="title" placeholder="Board Name" value="{{ settings.title }}">
                    <small>Board Subtitle:</small>
                    <input type="text" name="subtitle" placeholder="Board Subtitle" value="{{ settings.subtitle }}">
                    <small>Banner ( <a href="/open-images-folder">open image folder</a> ):</small>
                    <input type="text" name="banner" placeholder="Banner Image ([image-name].gif)" value="{{ settings.banner }}">
                    <input type="submit" value="Save Settings">
                </form>
                <form action="/delete-board" method="post" onsubmit="return confirm('Jannie are you okay? Jannie are you okay? Are you okay jannie');">
                    <input type="submit" value="Delete Board">
                </form>
            </div>
        <center><h2>Catalog</h2></center>
        {% for thread in threads %}
            <a href="#post-{{ thread.posts[0].number }}" class="sidebar-thread-link">
                {{ thread.title }}
            </a>
        {% endfor %}
    </div>
</div>
</div>

</body>
</html>
